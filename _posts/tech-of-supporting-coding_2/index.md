---
title: 문법, 처리흐름 제어
date: 2020-12-03
tags:
  - 코딩을 지탱하는 기술
keywords:
  - 코딩을 지탱하는 기술
---

> 본 포스팅은 니시오 히로카즈의 '코딩을 지탱하는 기술' 을 읽은 뒤 쓰는 글입니다.

## 문법이란 무엇일까

프로그래밍 언어를 배울 때 "연산자 우선순위"라는 문법을 배운다. 
'1 + 2 * 3' 같은 식에서 어느 순서대로 계산이 먼저될지 배우는 것인데 옛날에는 (1+2)*3의 형태로 계산되는 경우도 있다고 한다.
하지만 지금 대부분은 7이 나오는데 그 이유는 각 프로그래밍 언어에서 "+보다 *가 연산자가 높기 때문에 먼저 계산한다."라는 규칙을 정했기 때문이다.

여기에서 알 수 있듯이 문법이란 언어 설계자가 정한 규칙이다. 

## 스택머신

### FORTH의 스택머신

FORTH는 '1과 2를 더한다'를 다음과 같이 쓴다.
```
    1 2 +
```
이렇게 쓰는데에는 스택을 사용하기 때문이다. 

처음에 '1'을 스택에 담고 다음 '2'도 스택에 담는다. 마지막 '+' 연산자를 만나 스택에서 2개를 꺼내 더한뒤 다시 스택에 담는다.
최종 결과인 3이 나온다.

### 지금은  1 2 + 이렇게 안쓰는데요?

지금은 1 + 2 이렇게 사용하나 내부적으로는 FORTH 방식으로 실행된다!

## 구문트리

(1+2)\*3 을 LISP, FORTH와 비교해보자. 

LISP : (\*(+ 1 2)3)

FORTH: 1 2 + 3 *

각 언어별로 나타나는 형태는 다르지만 추상 구문트리는 동일하게 나온다. 
이 추상 구문트리를 전위, 중위, 후위 표기법에 따라 나타낼 뿐 의미는 동일하다. 



## if가 없었던 때가 있었다고?

원시적인 어셈블리어에는 if문이 없다. 하지만 C언어에는 if문이 있는데 C언어에서 if문을 사용하고 어셈블리어로 컴파일 하면 어셈블리어에서 movl, cmpl 명령어를 확인 할 수 있다.

이 movl명령어는 뒤의 주소로 점프하라는 명령, cmpl은 비교하는 명령어다. 

## if-else의 장점

c언어에서 else문 없이 코드를 작성할 수 있을까? if 문과 goto를 사용하면 가능하다. 하지만 가독성 면에서 goto를 사용하는것에 비해 떨어지기 때문에 if else 구문을 사용하는 것이 낫다.


## 반복 (while, if)

while은 대체할 수 있을까? 어셈블리어는 movl, cmpl사용하면 가능할 것 같다. 그렇다면 C언어에서는 if와 goto를 사용하면 while문을 대체할 수 있을것같다. 

하지만 그렇다면 while문은 대체 왜 쓰는 것일까? 그 이유는 '읽기 쉽게', '쓰기 쉽게' 위함이다. goto는 너무 강력하기 때문에 자칫 잘못하면 프로그램이 엉망이 되어버릴 수 있기 때문에 
사용하지 않고 while사용을 하는 것이다. 

for, foreach 문도 while로 대체가 가능하다. 하지만 위와 같은 이유인 '읽기 쉽게', '쓰기 쉽게' 하기 위해 탄생한 것이다. 


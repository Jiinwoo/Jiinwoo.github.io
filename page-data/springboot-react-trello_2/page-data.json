{"componentChunkName":"component---src-templates-post-tsx","path":"/springboot-react-trello_2/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>Spring은 배운지 얼마안됐고 security는 더더욱 안됐다.</p>\n<p>정확하지 않을 수 있습니다.</p>\n</blockquote>\n<h2 id=\"springboot-프로젝트-생성\" style=\"position:relative;\"><a href=\"#springboot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"springboot 프로젝트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>springboot 프로젝트 생성</h2>\n<p>나는 Intellij 안의 spring initializer를 사용했지만 직접 스프링이니셜라이저 사이트에\n들어가서 다운받는거랑 같다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a8fdc2f383bd29ac0bbdbca70e8144c/95489/create-project1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.72312703583062%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA30lEQVQoz6WSzW6DMBCE/VwY/6y9xjZplSjX3KL2DfL+k4UQipBKQ3oYgdnV59kdlM8fIO6grYcLDBcTLAVYH2Acod2hoV8RZ1DK0HIIqUMsB3guMALcBZv6VSwdAkfoth2BXi6wUUQ8NpnJ6ZaewEEqnb/webkhnr6lEH4gfhp7h9NhbSrWE1J/Rktl/PCuZiDLyMSMxphdO1s7m4G1ZqT8CGFZeBvIpZcw8gryD2Do6gx81aG2G6EsIa8AH7VFILJ7bRwaeW/kqX5L6y+H1hNc6mGPV/lLjsj1gCTruwMBNH+xyMgOywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create project1\"\n        title=\"create project1\"\n        src=\"/static/7a8fdc2f383bd29ac0bbdbca70e8144c/799d3/create-project1.png\"\n        srcset=\"/static/7a8fdc2f383bd29ac0bbdbca70e8144c/00d96/create-project1.png 148w,\n/static/7a8fdc2f383bd29ac0bbdbca70e8144c/0b23c/create-project1.png 295w,\n/static/7a8fdc2f383bd29ac0bbdbca70e8144c/799d3/create-project1.png 590w,\n/static/7a8fdc2f383bd29ac0bbdbca70e8144c/2a3d6/create-project1.png 885w,\n/static/7a8fdc2f383bd29ac0bbdbca70e8144c/ae92f/create-project1.png 1180w,\n/static/7a8fdc2f383bd29ac0bbdbca70e8144c/95489/create-project1.png 1228w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/54eee1bb047369c81dd89d9f61bc646e/95489/create-project2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.72312703583062%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA2klEQVQoz5WSaxLCIAyEey4t5dWElmqd8Qbe/xBrqK1THKr4Y4chgS+bQOM4gscIRwHaepw7g1bbQ5XyWyytjXYetmdwnOA4CJgXeCaJW4mXgGmfAY0nAdLqkt/AVMT4fieqc7gd1o6gjMuSJR25zB3SAE0TOpdcmAWsjF3Xl1pTOcPUmucBcb4hTBfQMKIPH5KYD0NtyyTAgHidV2BcCiRAJjlTBdyCnXyZfYslVQGPhv/Po+zBza+P/M3NSWmclRJpnNZ986tqSelymilf7lDzAxTlQcdpmf8TgKaBMykC5I0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create project2\"\n        title=\"create project2\"\n        src=\"/static/54eee1bb047369c81dd89d9f61bc646e/799d3/create-project2.png\"\n        srcset=\"/static/54eee1bb047369c81dd89d9f61bc646e/00d96/create-project2.png 148w,\n/static/54eee1bb047369c81dd89d9f61bc646e/0b23c/create-project2.png 295w,\n/static/54eee1bb047369c81dd89d9f61bc646e/799d3/create-project2.png 590w,\n/static/54eee1bb047369c81dd89d9f61bc646e/2a3d6/create-project2.png 885w,\n/static/54eee1bb047369c81dd89d9f61bc646e/ae92f/create-project2.png 1180w,\n/static/54eee1bb047369c81dd89d9f61bc646e/95489/create-project2.png 1228w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>지금 프로젝트에서는 이정도만 설치하자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 381px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a74a451ca1809c5f5dca343e43f8ac19/c26d8/create-project3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 167.97900262467192%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACGUlEQVRIx+1W246bMBDlsxJ8wdwNmEuibpas+tJKrfoNVfvtpzNOYRVatJDX3YeRGBgfzrHHMxOYrEBZt8htjaJ2KKrGW0mWFhYyMmTxZguSvETb96ibxls3DN5vhzOqpoXUBmKHBWGUQRRnCHtBmA0I84H8Ew6hxFHqHWCRt0CaDJE9IeuuyNsLTNlDF/1uqdIkN4ZCEQspUFqLxjmYJEEolQ/ayo5j1QxoUmJEMk2OUOk5wAe/weoudtpDSUCR+wyd1XQAEQUkd8FyI+j0HDArqTVc16PpBn+6CaVSqKJdgIqU3iTzC5ad5FBxuvr3NbCl7EDGxU1y9wUitjiK13R5C3Qpd2ao4szLrdselm5NQ/JNmm/ax39PmfdKKb9vKd0aBuLbo+N0F+B8KJPko4xwEMrLPQg9H8oWyXdpI3QMnbfIysoz5ILAFhPjhxh6yVHk968hq9uOqo/z4I/tISUzO1yyKtdSpTl5tix9a+osAM3qoofy8H8vt+Tg2sGsMtx7l1cZ7qqBH4AfgO8S8NVuPXlpy2litac8wmyN7QzIJZ9rIBs/c53kns1twY8rfhgyc8zki7/rpjXBxM5RYX0arzhfRqrcDmE1Qr38QvP1N8T40/sVjXv8/dPzFZZGPW4VjgaDp/EF3YkGBPJnwJwqtutvk0NBg1OY0wQ2fId9/gHZf4MgPytK/2O2jBZzh+R1vMY2zvt/ANLNpCqygeCAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create project3\"\n        title=\"create project3\"\n        src=\"/static/a74a451ca1809c5f5dca343e43f8ac19/c26d8/create-project3.png\"\n        srcset=\"/static/a74a451ca1809c5f5dca343e43f8ac19/00d96/create-project3.png 148w,\n/static/a74a451ca1809c5f5dca343e43f8ac19/0b23c/create-project3.png 295w,\n/static/a74a451ca1809c5f5dca343e43f8ac19/c26d8/create-project3.png 381w\"\n        sizes=\"(max-width: 381px) 100vw, 381px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>그리고 api, config 패키지를 다음과 같이 생성하자\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 335px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e8f5d0b76e218fb4cc60974b6599e546/9f328/folder1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.13432835820896%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADD0lEQVRIx51V2U7bQBT1P9A+VH3pC0uBComtJPFuj7exx0uclYBo1PL/f3B67ySmgIKS9OFo7PHcM+euNsIoQXP/BDlfYjRfQMQJHF8gjNMX+CLWCOhZJJneC8iOEa732KZvuTDi0MJw2uL3OMOyCtCOKoyHBfLMR5EFtHagdxkSgpdv3XdeZeojS4gw8B1IGeOpSbEY5pgQeVVKiNCBEO5bhGtseI4Ew4NxZ5Ihya6mj8hHc8hCwQ0EeiS/b3t7ghT2rRVhM56hGk2Rl7UmHdBH0/H2hiYMohjD2QItwfN89Eh1R7gvscEGLDWiTFXjOUrKeFWWOnt82XuDbRcYL0rIOJYFosUfRLNfyDKp95m0wy6qjdeHLIKbSESTR9TtmGov0gnyw0jXnOMHuyvUaujZdj0k5H49XUDVLXJVoahqQqNjzcXbCdgETTh45Qavd6YNj1SNH8j1ooRF+71XLq/ObSY1THaVDnQY2JR1clXVQ7TzByRpBkXqbJ19mxTaejWdt3YdjK8XFg7ObHw6/4cDXs9MfLkU+CaX+O4onJg5TqwVTu0Cn3+sz72DcXpr4+jGwTHh6NrB4ZWNw0sThz8DnKsprtMReqKEmdToC4WLgcCVk+Dk1tXnj2/ewrBJukOJ4NXzfT1t4oQmDCWmWT6jppqUeaEhKCkmuWxSWNhmE4y+DiYH2kec5Tp28/sJirKiWsx1bXINruLnrBO4LcsE7ueipV5+fIZSSl/QWxf05k5xP65Dvj0pKuTNGKoZoRqOkJC6jqy7dPdeXhMqIiyokCVNnIIQUjw39fNWQlYoywZqONad0Sn0QvGf04YI47xE2U60srJu4FEPm/bHsdqqMCOXecgyYV5WunfFByNsK+GAastRLdLZEwqa1kye0Pjii/YdtHpi9/omRFEjbSZUwIriWCKRinq41kNiH1KDZ11YSGSUCKXdrfUw4MRwLG3X30upwdMkn86Q0B8vJ3d59sXkruTyodG1+pknsIh4J4Xcv34zRzB5QkyGKfUstyCT8n8mlUonyPXDnQj/An3rvcg10a6/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"folder1\"\n        title=\"folder1\"\n        src=\"/static/e8f5d0b76e218fb4cc60974b6599e546/9f328/folder1.png\"\n        srcset=\"/static/e8f5d0b76e218fb4cc60974b6599e546/00d96/folder1.png 148w,\n/static/e8f5d0b76e218fb4cc60974b6599e546/0b23c/folder1.png 295w,\n/static/e8f5d0b76e218fb4cc60974b6599e546/9f328/folder1.png 335w\"\n        sizes=\"(max-width: 335px) 100vw, 335px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// SecurityConfig.class</span>\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableWebSecurity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SecurityConfig</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WebSecurityConfigurerAdapter</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 어떤 요청을 해보면 다음과 같이 401에러를 내려준다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a20b97e823bafceb604dde4448a2d39/3eaa1/api-call1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.307151230949586%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABk0lEQVQoz4VRS5bTMBD0OZJJMs5g2dbHkizLku3ECTOzYgEnYMMFeKy4DcfhWkVLJI/ZAIt6avWnuru6WNcL1nXFPM/w3mNZFhitwTmHECIj2W//Iv2FRPXlBx6+/QT79B3XU8Tl+ozi5XrBeZkzUZwifPCIMUKZDm5wML2FHwaMYUTf9xkuvw785TPYh68w60dcxh7v1zOK1fc4EYlSClJK6syzLaSApknlzX+PJyR/T41kfYSsDlCcQbYNgh9QsLalBIOa1ajrP2CM5WnSism+x1nFYIzBNE0kgyBfi4Ze2dSItFExjz4XKt3B2j6vqo2Gcy5PkwhVRz5L01qV48YadPRPeUorBKMwKI6JZClezzNOpyUfZCLtxhhy9zHQS4eK44jgLElA5IpWvuG3rbKtCZHWjVRbsKa5JXTgSTuSQJGOnDRJiZrshlUoyxLH4/GfSEMVKXG320OGFdYH2LaCqJ7w9HjAu/KAqnzEw25HOX/Hfr/HZrPJh8uEJbE32mXxDxRMDRLJHangf9hut/lYvwCLohJxT4SiYQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"api call1\"\n        title=\"api call1\"\n        src=\"/static/0a20b97e823bafceb604dde4448a2d39/799d3/api-call1.png\"\n        srcset=\"/static/0a20b97e823bafceb604dde4448a2d39/00d96/api-call1.png 148w,\n/static/0a20b97e823bafceb604dde4448a2d39/0b23c/api-call1.png 295w,\n/static/0a20b97e823bafceb604dde4448a2d39/799d3/api-call1.png 590w,\n/static/0a20b97e823bafceb604dde4448a2d39/3eaa1/api-call1.png 853w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n기본적으로 모든 요청에 인증이 필요하기 때문이다. 앞으로 method를 오버라이드해서\n설정들을 변경해볼 것이다.</p>\n<h3 id=\"인증authentication\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9Dauthentication\" aria-label=\"인증authentication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증(Authentication)</h3>\n<p>우선 로그인 과정부터 생각해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n <span class=\"token property\">\"email\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"any@abc.com\"</span><span class=\"token punctuation\">,</span>\n <span class=\"token property\">\"password\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"1234\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>프론트에서는 /api/auth/login 으로 위와 같은 json을 보낸다.  </li>\n<li>Security filter chain에서 \"특정 filter\"에서 해당 정보를 AuthenticationToken으로 만들어서\nAuthenticationManager한테 전달 한 후 인증해달라고 한다.</li>\n<li>AuthenticationManager는 현재 등록되어있는 Provider들한테 인증요청한다.  </li>\n<li>Provider는 UserDetailService한테 DB에 존재하는지 존재하면 UserDetails를 반환해달라고 한다.</li>\n<li></li>\n</ol>\n<p> 여기서 \"특정 filter\"로는 AbstractAuthenticationProcessingFilter를 상속받은 JwtAuthenticationFilter를 만들었다. 그 뒤\nattemptAuthentication메소드를 재정의 해주면 된다.</p>\n<p>이 필터의 역활은 자기가 가지고있는 AuthenticationManager한테 (인증되지 않은)Authentication을 넘기면서 인증 해달라고 요청\n한 뒤 결과로 (인증된) Authentication을 받아서 successfulAuthentication를 호출하고 다음필터로 넘어간다. 그전에 에러가\n발생하면 unsuccessfulAuthentication를 호출한다.</p>\n<p>우선 사용자의 로그인 정보를 담을 DTO를 생성하자</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LoginRequestDTO</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음으로 Authentication 인터페이스의 구현체인 AbstractAuthenticationToken을 상속받은 JwtAuthenticationToken을 만들자</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAuthenticationToken</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractAuthenticationToken</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Object</span> principal<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> credentials<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtAuthenticationToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GrantedAuthority</span><span class=\"token punctuation\">></span></span> authorities<span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span> principal<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> credentials<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>principal <span class=\"token operator\">=</span> principal<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>credentials <span class=\"token operator\">=</span> credentials<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtAuthenticationToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> principal<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> credentials<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>principal <span class=\"token operator\">=</span> principal<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>credentials <span class=\"token operator\">=</span> credentials<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getCredentials</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getPrincipal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 attemptAuthentication 추상 메소드를 override해서 구현해주자.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 589px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6bff064fcd41f95f89cfb4739226d8a6/b9f62/implement.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.84550084889643%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAxklEQVQY023I206DQBRGYV7GtIgVQk1UCu2IMBxmbBC1jY2nm8pr2MTExPadlwN4YYIXX/a/l5XmiqzUyEKTZgW5WpLmJeHiakBcSzx/im3bOM6J4QxYcZIg4phESuZCMIuiThCGA7Nojuu5jEdHHNujf4yx1O2GsnpE1RuymxVSPxgr8mVrbdq66+1uTS8EE+8c1w849S//CJi4Z1hVc6B+//61567Zd7du+t26N6pt3/XrJ+XzDvXSK5525v9Av32x0Ft+AGPBkiPA3R6wAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"implement\"\n        title=\"implement\"\n        src=\"/static/6bff064fcd41f95f89cfb4739226d8a6/b9f62/implement.png\"\n        srcset=\"/static/6bff064fcd41f95f89cfb4739226d8a6/00d96/implement.png 148w,\n/static/6bff064fcd41f95f89cfb4739226d8a6/0b23c/implement.png 295w,\n/static/6bff064fcd41f95f89cfb4739226d8a6/b9f62/implement.png 589w\"\n        sizes=\"(max-width: 589px) 100vw, 589px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAuthenticationFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractAuthenticationProcessingFilter</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> ERROR_MESSAGE <span class=\"token operator\">=</span> <span class=\"token string\">\"Something went wrong while parsing /login request body\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">ObjectMapper</span> objectMapper<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">JwtAuthenticationFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ObjectMapper</span> objectMapper<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">AntPathRequestMatcher</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/auth/login\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objectMapper <span class=\"token operator\">=</span> objectMapper<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Authentication</span> <span class=\"token function\">attemptAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">AuthenticationException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ServletException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthenticationServiceException</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token string\">\"Authentication method not supported: \"</span> <span class=\"token operator\">+</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">LoginRequestDTO</span> credentials <span class=\"token operator\">=</span> objectMapper<span class=\"token punctuation\">.</span><span class=\"token function\">readValue</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">LoginRequestDTO</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">JwtAuthenticationToken</span> authenticationToken <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JwtAuthenticationToken</span><span class=\"token punctuation\">(</span>\n                    credentials<span class=\"token punctuation\">.</span><span class=\"token function\">getEmail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    credentials<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Authentication</span> auth <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAuthenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>authenticationToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> auth<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InternalAuthenticationServiceException</span><span class=\"token punctuation\">(</span>ERROR_MESSAGE<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여기서 눈여겨 보아야 할 점은 JwtAuthenticationToken을 만들어서 AuthenticationManager한테 authenticate해달라고 요청 하는\n부분이다.\nSecurityConfig에서 AuthenticationManager를 등록해야한다. 그리고 기타 설정들을 추가하자</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableWebSecurity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SecurityConfig</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WebSecurityConfigurerAdapter</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CustomUserDetailsService</span> customUserDetailsService<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ObjectMapper</span> objectMapper<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">SecurityHandler</span> securityHandler<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CustomAuthenticationEntryPoint</span> customAuthenticationEntryPoint<span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AuthenticationManagerBuilder</span> auth<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        auth<span class=\"token punctuation\">.</span><span class=\"token function\">authenticationProvider</span><span class=\"token punctuation\">(</span><span class=\"token function\">authenticationProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WebSecurity</span> web<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        web<span class=\"token punctuation\">.</span><span class=\"token function\">ignoring</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/resources/**\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/css/**\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/vendor/**\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/js/**\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/favicon*/**\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/img/**\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSecurity</span> http<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        http<span class=\"token punctuation\">.</span><span class=\"token function\">headers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">frameOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">disable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        http\n                <span class=\"token comment\">// remove csrf and state in session because in jwt we do not need them</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">csrf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">disable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">sessionManagement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sessionCreationPolicy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SessionCreationPolicy</span><span class=\"token punctuation\">.</span>STATELESS<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">/</span> add jwt filters <span class=\"token punctuation\">(</span><span class=\"token number\">1.</span> authentication<span class=\"token punctuation\">,</span> <span class=\"token number\">2.</span> authorization<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token function\">jwtAuthenticationFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token function\">jwtAuthorizationFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">authorizeRequests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">/</span> configure access rules\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/api/auth/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">permitAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/h2-console/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">permitAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/public/management/*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasRole</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MANAGER\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/public/admin/*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasRole</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ADMIN\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">anyRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">exceptionHandling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">authenticationEntryPoint</span><span class=\"token punctuation\">(</span>customAuthenticationEntryPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AuthenticationProvider</span> <span class=\"token function\">authenticationProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">DaoAuthenticationProvider</span> daoAuthenticationProvider <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DaoAuthenticationProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        daoAuthenticationProvider<span class=\"token punctuation\">.</span><span class=\"token function\">setPasswordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token function\">passwordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        daoAuthenticationProvider<span class=\"token punctuation\">.</span><span class=\"token function\">setUserDetailsService</span><span class=\"token punctuation\">(</span>customUserDetailsService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> daoAuthenticationProvider<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtAuthenticationFilter</span> <span class=\"token function\">jwtAuthenticationFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">JwtAuthenticationFilter</span> filter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JwtAuthenticationFilter</span><span class=\"token punctuation\">(</span>objectMapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">setAuthenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token function\">authenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">setAuthenticationSuccessHandler</span><span class=\"token punctuation\">(</span>securityHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">setAuthenticationFailureHandler</span><span class=\"token punctuation\">(</span>securityHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">afterPropertiesSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">setFilterProcessesUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/auth/signin\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> filter<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtAuthorizationFilter</span> jwtAuthorizationFilter <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">JwtAuthorizationFilter</span> filter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JwtAuthorizationFilter</span><span class=\"token punctuation\">(</span><span class=\"token function\">authenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>customUserDetailsService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> filter<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PasswordEncoder</span> <span class=\"token function\">passwordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BCryptPasswordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여기서 아직 구현하지 않은 것들이 있는데 만들어야 할 것들에는 </p>\n<ol>\n<li>Provider 구현체 DaoAuthenticationProvider</li>\n<li>AuthenticationEntryPoint 구현체 CustomAuthenticationEntryPoint</li>\n<li>header인증을 위한 BasicAuthenticationFilter 구현체 JwtAuthorizationFilter</li>\n<li>User Entity 및 UserPrincipal </li>\n<li>UserDetailsService 구현체 CustomUserDetailsService</li>\n<li>ErrorResponseDTO</li>\n</ol>\n<p>는 다음포스트에서 만들자</p>","excerpt":"Spring은 배운지 얼마안됐고 security는 더더욱 안됐다. 정확하지 않을 수 있습니다. springboot 프로젝트 생성 나는 Intellij 안의 spring initializer…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/springboot-react-trello_2/#springboot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\">springboot 프로젝트 생성</a></p>\n<ul>\n<li><a href=\"/springboot-react-trello_2/#%EC%9D%B8%EC%A6%9Dauthentication\">인증(Authentication)</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/springboot-react-trello_2/"},"frontmatter":{"title":"Spring Boot, React 사용해 Trello 클론코딩하기 ( 2 )","date":"May 23, 2020","tags":["springboot","react"],"keywords":["trello","springboot","react"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/springboot-react-trello_2/","series":[{"slug":"/springboot-react-trello_1/","title":"Spring Boot, React 사용해 Trello 클론코딩하기 ( 1 )","num":1},{"slug":"/springboot-react-trello_2/","title":"Spring Boot, React 사용해 Trello 클론코딩하기 ( 2 )","num":2},{"slug":"/springboot-react-trello_3/","title":"Spring Boot, React 사용해 Trello 클론코딩하기 ( 3 )","num":3},{"slug":"/springboot-react-trello_4/","title":"Spring Boot, React 사용해 Trello 클론코딩하기 ( 4 )","num":4}],"lastmod":"0001-01-01"}}}